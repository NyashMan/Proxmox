# Введение
В данном руководстве рассмотрим процесс создания виртуальной машины и контейнера в среде ProxMox.

## Цели
- загрузить образ операционной системы
- развернуть загруженный образ операционной системы в среде виртуализации
- загрузить шаблон (tamplate) контейнера из репозитория
- развернуть загруженный шаблон контейнера в среде виртуализации

## Загрузка образа операционной системы
- Для развёртки виртуальной машины в среде виртуализации, необходимо загрузить образ системы в хранилище на сервере ProxMox.
![image](https://github.com/NyashMan/Proxmox/assets/1348639/c434f384-2254-4822-91a9-ee3c7e25f75d)
![image](https://github.com/NyashMan/Proxmox/assets/1348639/17166b82-ca8a-458b-aed3-ee5b4ff9e28f)
![image](https://github.com/NyashMan/Proxmox/assets/1348639/d789d017-b2bc-49b7-96c0-c0ab5d3742f9)
![image](https://github.com/NyashMan/Proxmox/assets/1348639/f80cec1a-1cf5-4582-a47d-8b54a06daa2d)
![image](https://github.com/NyashMan/Proxmox/assets/1348639/80a9dbbf-f40a-40dd-8755-f7d12a752b7a)

### Создание виртуальной машины:
![image](https://github.com/NyashMan/Proxmox/assets/1348639/2be17a51-4b1a-40a6-af56-28a17b07c4d4)
- В открывшемся окне необходимо указать информацию
![image](https://github.com/NyashMan/Proxmox/assets/1348639/84bfd5c1-802a-4187-b925-e158e7d9ba51)
- **"Node:"** выбрать сервер (ноду) на которой будет установлена виртуальная машина
- **"VM ID:"** уникальный номер, который присваивается виртуальной машине при её создании. При удалении - номер освобождается.
- **"Name:"** имя виртуальной машины, которое задаётся пользователем при её создании.
- **"Resource Pool"** необходим для разграничения прав доступа к ресурсам виртуализации.
- Во вкладке OS необходимо произвести настройки и обязательно выбрать образ операционной системы, которая будет установлена.
![image](https://github.com/NyashMan/Proxmox/assets/1348639/e2c31a8a-551a-4985-9c52-db19799c9778)
- **"Storage:"** - выбрать локальный storage (хранилище), в котором будут распологаться файлы виртуальной машины.
- **"ISO image:"** - образ операционной системы из которого будет производиться установка.
- **"Type:"** - тип операционной системы, установка которой будет произвоиться
- **"Version:"** - версия ядра (в случае операционной системы linux), либо версия ОС (в случае Windows), которая будет установлена.
- **Вкладка** "System", производим настройки системы BIOS виртуальной машины
![image](https://github.com/NyashMan/Proxmox/assets/1348639/253df553-3c2d-4af3-82fb-1f7769eb9d60)
- **"Graphic card:"** - параметры графического ускорителя виртуальной машины.
- **"Machine:"** - параметры чипсета виртуальной машины.
- **"SCSI Controller:"** - настройки контроллера управления жёсткими дисками.
- **"Qemu Agent"** - параметр отвечающий за установку "демона" (daemon), позволяющего удалённоу управление гостевой операционной системой, установленной на сервере.
- **"Add TPM:"** - параметр отвечающий за добавления эмуляции модуля TPM в гостевой операционной системе.
- **"BIOS:"** - параметр отвечающий за выбор виртуальной системы BIOS в гостевой операционной системе.
- Вкладка "Disks", производим настройку виртуальных дисков на гостевой операционной системе
![image](https://github.com/NyashMan/Proxmox/assets/1348639/5abd71ba-5600-4149-8928-296494049f00)
- **"Bus/Device:"** - параметр выбора шины и контроллера управления жёсткими дисками.
- **"Storage:"** - место, в котором будет храниться образ виртуального диска гостевой операционной системы.
- **"Disk size:"** - размер виртуального диска гостевой операционной системы.
- **"Cache:"** - параметр отвечающий за запись данных на физический носитель сервера.
- **"Discard:** - параметр отвечающий за распределение места на физических дисках (в случае если гостевая ОС устанавливается на твердотельный накопитель, данный параметр стоит включать).
- **IO threads:** - параметр отвечающий за многопоточную работу виртуальных дисков гостевой ОС с виртуальными.
- Вкладка "CPU", позволяет произвести настройку параметров центрального процессора гостевой ОС
- **"Sockets:"** - количество потоков процессора используемых при работе гостевой ОС.
- **"Cores:"** - количество ядер процессора используемых при работе гостевой ОС.
- **"Type:"** - параметр отвечающий за вид процессора, который будет эмулироваться гостевой ОС.
- **"Total cores:"** - савокупность ядер и потоков физического процессора, которые будут использованы в гостевой ОС (вычисляется по формуле: кол-во физ. ядер x кол-во потоков).
- Вкладка "Memory", отвечает за количество выделенной оперативной памяти для гостевой ОС.
![image](https://github.com/NyashMan/Proxmox/assets/1348639/7ab5c8d5-4b07-4cb5-80e2-23ef1a2c5739)
- **"Memory:"** - параметр отвечающий за количество выделенной памяти (в мегабайтах) для гостевой ОС.
- Вкладка "Network", отвечает за настройку сетевого интерфейса гостевой операционной системы.
- **"Bridge:"** - параметр отвечающий за связанность виртуального адаптера гостевой ОС с физическим адаптером сервера.
- **"VLAN Tag:"** - параметр отвечает за тэг/номер VLAN, в котором будет находиться гостевая ОС. (пр. - при необходимости изоляции одной гостевой ОС от другой, либо объединения нескольких гостевых ОС в один стек, данный параметр необходимо задать).
- **"Firewall:"** - параметр отвечающий за работу в гостевой операционной система межсетевого экрана (правила настройки регулируются на физическом сервере).
- **"Model:"** - параметр отвечающий за выбор сетевого адаптера, на базе которого будет работать гостевая операционная система.
- **"MAC address:"** - параметр отвечающий за автоматическое создание MAC адреса для сетевого интерфейса гостевой операционной системы (при необходимости, данный параметр можно задать вручную).
- Вкладка "Confurm", содержит в себе суммарную информацию о проделанной настройке гостевой операционной системе. Последний этап, перед созданием гостевой операционной системы.
![image](https://github.com/NyashMan/Proxmox/assets/1348639/18b7a6cd-d737-4019-adab-c1375bddddbf)
- После успешного создания гостевой ОС, она появится в левой части окна, как одна из виртуальных машин доступных для работы.
### Установка гостевой ОС
- Производим установку ОС стандартным способом.
![image](https://github.com/NyashMan/Proxmox/assets/1348639/07d0b3c0-7ba0-4807-ba05-606e251a74c8)
![image](https://github.com/NyashMan/Proxmox/assets/1348639/f32e4664-69e0-4f2e-b68b-f186fed5b3c5)

## Развёртка шаблона контейнера


## Удаление ВМ/Контейнера

- Процесс удаление виртуальной машины
![image](https://github.com/NyashMan/Proxmox/assets/1348639/8244e133-da1e-491f-a3d3-ba5068b0f6ce)
- Для полного удаления машины из сервера виртуализации, необходимо выполнить подтверждение действий.
Необходимо ввести ID виртуальной машины (в данном случае 100) и выделить чекбоксы ниже (Purge from job configuration, Destroy unreferenced disks owned by guest) -> Remove
![image](https://github.com/NyashMan/Proxmox/assets/1348639/da87da51-2fc5-49d8-9d87-e70eb3532bf7)
- После проделанных операций, удаление ВМ должно завершиться успешно.

- Процесс удаления контейнера

